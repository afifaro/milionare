<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who Wants to Be a Millionaire - Indonesia</title>
    <!-- Memuat library untuk membaca file Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a4d 0%, #0d0d26 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 10px;
            background: linear-gradient(90deg, #ff6b00, #ffaa00);
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 15px rgba(255, 170, 0, 0.4);
        }

        .header h1 {
            font-size: 1.5rem;
        }

        /* Start Section */
        #startSection {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            max-width: 600px;
            margin: 20px auto;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        #startSection h2 {
            margin-bottom: 20px;
            color: #ffaa00;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            text-align: left;
            font-weight: bold;
        }

        #playerName {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #ffaa00;
            background: #0d0d26;
            color: white;
            font-size: 1rem;
        }

        .file-upload-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .custom-file-upload {
            border: 1px dashed #ffaa00;
            display: inline-block;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 8px;
            background: #1a1a4d;
        }

        #fileInput {
            display: none;
        }

        #fileName {
            margin-top: 10px;
            font-style: italic;
            color: #ccc;
        }

        .start-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        #startButton {
            background: linear-gradient(135deg, #00b300, #008000);
            color: white;
        }

        #startButton:hover {
            background: linear-gradient(135deg, #00cc00, #009900);
            box-shadow: 0 4px 10px rgba(0, 204, 0, 0.4);
        }

        #leaderboardButton {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }
        
        #leaderboardButton:hover {
            background: linear-gradient(135deg, #008fff, #0066cc);
            box-shadow: 0 4px 10px rgba(0, 143, 255, 0.4);
        }

        /* Game Container */
        #gameContainer {
            display: none;
            max-width: 900px;
            margin: 10px auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        /* Info Bar */
        .info-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            background: #0d0d26;
            padding: 10px;
            border-radius: 8px;
        }

        .info-bar-item {
            font-size: 1rem;
            font-weight: bold;
        }
        
        #currentPrize {
            color: #ffaa00;
        }

        /* Prize List */
        .prize-list {
            list-style: none;
            text-align: right;
            margin-bottom: 20px;
            padding: 10px;
            background: #0d0d26;
            border-radius: 8px;
        }

        .prize-list li {
            padding: 4px 10px;
            border-radius: 5px;
            margin-bottom: 3px;
            font-size: 0.9rem;
            color: #aaa;
            font-weight: bold;
        }

        .prize-list li.current {
            background: #ffaa00;
            color: #0d0d26;
            transform: scale(1.05);
        }

        .prize-list li.safe {
            color: #33cc33; /* Warna untuk titik aman */
        }

        /* Question Area */
        .question-box {
            background: linear-gradient(135deg, #ff6b00, #ffaa00);
            color: #1a1a4d;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(255, 170, 0, 0.3);
        }

        /* Answers Area */
        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .answer-btn {
            background: linear-gradient(135deg, #1a1a4d, #0d0d26);
            color: white;
            border: 2px solid #ffaa00;
            padding: 15px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .answer-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff6b00, #ffaa00);
            color: #1a1a4d;
        }
        
        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .answer-btn.selected {
            background: #ffc107; /* Kuning saat dipilih */
            color: #0d0d26;
        }

        .answer-btn.correct {
            background: #28a745; /* Hijau untuk jawaban benar */
            color: white;
            border-color: #28a745;
        }

        .answer-btn.wrong {
            background: #dc3545; /* Merah untuk jawaban salah */
            color: white;
            border-color: #dc3545;
        }

        .answer-prefix {
            font-weight: bold;
            color: #ffaa00;
            margin-right: 10px;
        }

        /* Modals (Game Over & Leaderboard) */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        .modal-content {
            background: #1a1a4d;
            margin: auto;
            padding: 25px;
            border: 1px solid #ffaa00;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(255, 170, 0, 0.4);
        }

        .modal-content h2 {
            color: #ffaa00;
            margin-bottom: 15px;
        }

        #gameOverMessage {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: white;
            text-decoration: none;
        }

        /* Leaderboard Table */
        #leaderboardTable {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        #leaderboardTable th, #leaderboardTable td {
            padding: 10px;
            border: 1px solid #0d0d26;
            text-align: left;
        }

        #leaderboardTable th {
            background: #ffaa00;
            color: #0d0d26;
        }
        
        #leaderboardTable tr:nth-child(even) {
            background: #0d0d26;
        }

        .rank-medal {
            font-size: 1.2rem;
        }

        #clearLeaderboardBtn {
            background: #dc3545;
            color: white;
            margin-top: 15px;
        }
        #clearLeaderboardBtn:hover {
            background: #c82333;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .answers-grid {
                grid-template-columns: 1fr;
            }

            .info-bar {
                flex-direction: column;
                gap: 10px;
            }

            .prize-list {
                display: none; /* Sembunyikan daftar di HP untuk hemat ruang */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Who Wants to Be a Millionaire - Indonesia</h1>
        </header>

        <!-- Start Section -->
        <section id="startSection">
            <h2>Selamat Datang!</h2>
            <div class="input-group">
                <label for="playerName">Masukkan Nama Anda:</label>
                <input type="text" id="playerName" placeholder="Nama Pemain...">
            </div>
            
            <div class="file-upload-group">
                <label>Muat Bank Soal (Opsional, .xlsx):</label>
                <label for="fileInput" class="custom-file-upload">Pilih File</label>
                <input type="file" id="fileInput" accept=".xlsx" onchange="handleFile(event)">
                <div id="fileName">Bank Soal Default akan digunakan.</div>
            </div>

            <div class="start-buttons">
                <button id="startButton" class="btn" onclick="startGame()">Mulai</button>
                <button id="leaderboardButton" class="btn" onclick="showLeaderboard()">Papan Skor</button>
            </div>
        </section>

        <!-- Game Container -->
        <section id="gameContainer">
            <!-- Info Bar -->
            <div class="info-bar">
                <div class="info-bar-item" id="playerNameDisplay"></div>
                <div class="info-bar-item" id="questionNumber"></div>
                <div class="info-bar-item" id="currentPrize"></div>
            </div>

            <!-- Prize List (Desktop) -->
            <ul class="prize-list" id="prizeList">
                <!-- Daftar hadiah akan diisi oleh JavaScript -->
            </ul>

            <!-- Question Box -->
            <div class="question-box" id="questionText">
                Memuat pertanyaan...
            </div>

            <!-- Answers -->
            <div class="answers-grid">
                <button class="answer-btn" id="answerA" onclick="selectAnswer('A')"><span class="answer-prefix">A:</span> <span id="answerA_text"></span></button>
                <button class="answer-btn" id="answerB" onclick="selectAnswer('B')"><span class="answer-prefix">B:</span> <span id="answerB_text"></span></button>
                <button class="answer-btn" id="answerC" onclick="selectAnswer('C')"><span class="answer-prefix">C:</span> <span id="answerC_text"></span></button>
                <button class="answer-btn" id="answerD" onclick="selectAnswer('D')"><span class="answer-prefix">D:</span> <span id="answerD_text"></span></button>
            </div>
        </section>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="restartGame()">&times;</span>
            <h2 id="gameOverTitle">Game Over</h2>
            <p id="gameOverMessage">Anda memenangkan Rp 0.</p>
            <button class="btn" onclick="restartGame()">Kembali ke Menu</button>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeLeaderboard()">&times;</span>
            <h2>Papan Skor</h2>
            <div id="leaderboardContent">
                <p>Belum ada skor yang tersimpan.</p>
            </div>
            <button id="clearLeaderboardBtn" class="btn" onclick="clearLeaderboard()">Hapus Skor</button>
        </div>
    </div>

    <script>
        // Variabel Global Game
        let currentQuestionIndex = 0;
        let score = 0;
        let playerName = '';
        let questions = [];
        let backgroundMusic; // <-- [PERBAIKAN] Variabel untuk musik

        // Daftar Hadiah
        const prizeLevels = [
            0, 100000, 200000, 300000, 500000, 1000000, // 5
            2000000, 4000000, 8000000, 10000000, 20000000, // 10
            40000000, 60000000, 80000000, 100000000, 1000000000 // 15
        ];
        // Indeks (dimulai dari 0) dari level yang merupakan titik aman
        const safeLevels = [5, 10]; 

        // Fungsi format uang
        function formatMoney(amount) {
            return new Intl.NumberFormat('id-ID').format(amount);
        }

        // Memuat file Excel bank soal default saat halaman dimuat
        document.addEventListener('DOMContentLoaded', loadDefaultFile);

        function loadDefaultFile() {
            // Lokasi file bank soal default Anda
            const defaultFilePath = 'bank_soal.xlsx';
            
            fetch(defaultFilePath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("File default tidak ditemukan. Memuat soal cadangan.");
                    }
                    return response.arrayBuffer();
                })
                .then(data => {
                    parseExcelData(data);
                    document.getElementById('fileName').textContent = 'Bank Soal Default berhasil dimuat.';
                })
                .catch(error => {
                    console.warn(error.message);
                    loadDefaultQuestions(); // Muat soal hardcode jika fetch gagal
                    document.getElementById('fileName').textContent = 'Gagal muat file default. Soal cadangan dimuat.';
                });
        }

        // Soal cadangan jika file Excel gagal dimuat
        function loadDefaultQuestions() {
            questions = [
                { SOAL: "Ibukota Indonesia?", A: "Jakarta", B: "Bandung", C: "Surabaya", D: "Medan", KUNCI: "A" },
                { SOAL: "2 + 2 = ?", A: "3", B: "4", C: "5", D: "6", KUNCI: "B" },
                { SOAL: "Mata uang Jepang?", A: "Won", B: "Dollar", C: "Yen", D: "Ringgit", KUNCI: "C" },
                { SOAL: "Siapa presiden pertama Indonesia?", A: "Soeharto", B: "BJ Habibie", C: "Megawati", D: "Soekarno", KUNCI: "D" },
                { SOAL: "Pulau terbesar di Indonesia?", A: "Jawa", B: "Sumatra", C: "Kalimantan", D: "Papua", KUNCI: "C" },
                { SOAL: "Lagu kebangsaan Indonesia?", A: "Indonesia Raya", B: "Padamu Negeri", C: "Maju Tak Gentar", D: "Garuda Pancasila", KUNCI: "A" },
                { SOAL: "Gunung tertinggi di dunia?", A: "K2", B: "Everest", C: "Kilimanjaro", D: "Jaya Wijaya", KUNCI: "B" },
                { SOAL: "Berapa jumlah provinsi di Indonesia saat ini (2024)?", A: "34", B: "35", C: "37", D: "38", KUNCI: "D" },
                { SOAL: "Apa kepanjangan dari CPU?", A: "Central Processing Unit", B: "Computer Personal Unit", C: "Central Power Unit", D: "Control Processing Unit", KUNCI: "A" },
                { SOAL: "Planet terdekat dengan Matahari?", A: "Venus", B: "Mars", C: "Merkurius", D: "Bumi", KUNCI: "C" },
                { SOAL: "Pencipta lampu bohlam?", A: "Albert Einstein", B: "Thomas Edison", C: "Nikola Tesla", D: "Alexander Graham Bell", KUNCI: "B" },
                { SOAL: "Tahun berapa Indonesia merdeka?", A: "1942", B: "1945", C: "1949", D: "1950", KUNCI: "B" },
                { SOAL: "Apa warna bendera Indonesia?", A: "Merah - Putih", B: "Putih - Merah", C: "Merah - Kuning", D: "Biru - Putih", KUNCI: "A" },
                { SOAL: "Negara terluas di dunia?", A: "China", B: "Amerika Serikat", C: "Kanada", D: "Rusia", KUNCI: "D" },
                { SOAL: "Samudra terluas di dunia?", A: "Atlantik", B: "Pasifik", C: "Hindia", D: "Arktik", KUNCI: "B" }
            ];
            // Acak soal cadangan
            questions = shuffleArray(questions);
        }

        // Fungsi untuk menangani upload file custom
        function handleFile(event) {
            const file = event.target.files[0];
            if (file) {
                document.getElementById('fileName').textContent = file.name;
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        parseExcelData(e.target.result);
                    } catch (err) {
                        alert("Gagal memproses file. Pastikan format kolom benar: SOAL, A, B, C, D, KUNCI.");
                        loadDefaultFile(); // Kembali ke default jika file custom error
                    }
                };
                reader.readAsArrayBuffer(file);
            }
        }
        
        // Fungsi untuk mem-parsing data dari Excel
        function parseExcelData(data) {
            const workbook = XLSX.read(data, { type: 'array' });
            const firstSheetName = workbook.SheetNames[0];
            const worksheet = workbook.Sheets[firstSheetName];
            const jsonSoal = XLSX.utils.sheet_to_json(worksheet);

            // Validasi data
            if (jsonSoal.length < 15) {
                alert("File Excel harus memiliki setidaknya 15 soal. Memuat soal default.");
                loadDefaultQuestions();
                return;
            }

            // Validasi kolom
            const requiredCols = ['SOAL', 'A', 'B', 'C', 'D', 'KUNCI'];
            const firstRow = jsonSoal[0];
            for (const col of requiredCols) {
                if (!(col in firstRow)) {
                    alert(`Kolom "${col}" tidak ditemukan di file Excel. Memuat soal default.`);
                    loadDefaultQuestions();
                    return;
                }
            }

            questions = shuffleArray(jsonSoal);
            console.log("Soal berhasil dimuat dari file:", questions);
        }

        // Fungsi untuk mengacak array (Fisher-Yates Shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Fungsi untuk memulai game
        function startGame() {
            playerName = document.getElementById('playerName').value.trim();
            if (playerName === '') {
                alert('Silakan masukkan nama Anda!');
                return;
            }
            if (!questions || questions.length < 15) {
                alert('Bank Soal tidak cukup (minimal 15). Coba muat file lain atau gunakan default.');
                return;
            }

            // --- [PERBAIKAN] MULAI MUSIK ---
            // Hentikan musik lama jika ada (misal: dari game sebelumnya)
            if (backgroundMusic) {
                backgroundMusic.pause();
            }
            
            // Buat dan mainkan musik baru
            // Pastikan file "musik.mp3" ada di folder yang sama di GitHub
            backgroundMusic = new Audio('musik.mp3'); 
            backgroundMusic.loop = true; // Agar musik berulang
            backgroundMusic.volume = 0.3; // Atur volume (0.0 - 1.0)
            
            // Menggunakan .play() di dalam klik pengguna (startGame) akan berhasil
            backgroundMusic.play().catch(error => {
                // Tangani error jika browser tetap memblokir (jarang terjadi jika dipicu klik)
                console.warn("Audio play dihentikan oleh browser:", error);
            });
            // --- [PERBAIKAN] SELESAI MUSIK ---

            currentQuestionIndex = 0;
            score = 0;
            
            document.getElementById('playerNameDisplay').textContent = `Pemain: ${playerName}`;
            
            document.getElementById('startSection').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            
            buildPrizeList();
            showQuestion();
        }

        // Fungsi untuk membangun daftar hadiah
        function buildPrizeList() {
            const prizeListUl = document.getElementById('prizeList');
            prizeListUl.innerHTML = ''; // Kosongkan daftar
            
            // Kita buat dari atas ke bawah (level 15 ke 1)
            for (let i = 15; i >= 1; i--) {
                const li = document.createElement('li');
                li.textContent = `${i}. Rp ${formatMoney(prizeLevels[i])}`;
                
                if (safeLevels.includes(i)) {
                    li.classList.add('safe');
                }
                
                if (i === (currentQuestionIndex + 1)) {
                    li.classList.add('current');
                }
                
                prizeListUl.appendChild(li);
            }
        }

        // Fungsi untuk menampilkan pertanyaan
        function showQuestion() {
            if (currentQuestionIndex >= 15) {
                // Jika sudah 15 soal, pemain menang
                showGameOverModal(true); // true = menang
                return;
            }

            // Reset tampilan tombol jawaban
            resetAnswerButtons();

            const q = questions[currentQuestionIndex];
            
            document.getElementById('questionText').textContent = q.SOAL;
            document.getElementById('answerA_text').textContent = q.A;
            document.getElementById('answerB_text').textContent = q.B;
            document.getElementById('answerC_text').textContent = q.C;
            document.getElementById('answerD_text').textContent = q.D;
            
            document.getElementById('questionNumber').textContent = `Soal ${currentQuestionIndex + 1} / 15`;
            document.getElementById('currentPrize').textContent = `Hadiah: Rp ${formatMoney(prizeLevels[currentQuestionIndex + 1])}`;
            
            // Update daftar hadiah
            buildPrizeList();
        }

        // Fungsi untuk mereset warna tombol jawaban
        function resetAnswerButtons() {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => {
                btn.classList.remove('selected', 'correct', 'wrong');
                btn.disabled = false;
            });
        }

        // Fungsi saat pemain memilih jawaban
        function selectAnswer(selectedOption) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => btn.disabled = true); // Matikan semua tombol

            const selectedBtn = document.getElementById(`answer${selectedOption}`);
            selectedBtn.classList.add('selected'); // Tandai yang dipilih

            const q = questions[currentQuestionIndex];
            const correctAnswer = q.KUNCI.toUpperCase();

            // Jeda untuk efek dramatis
            setTimeout(() => {
                if (selectedOption === correctAnswer) {
                    // Jawaban Benar
                    selectedBtn.classList.remove('selected');
                    selectedBtn.classList.add('correct');
                    
                    // Jeda lagi sebelum lanjut
                    setTimeout(() => {
                        currentQuestionIndex++;
                        score = prizeLevels[currentQuestionIndex]; // Skor adalah hadiah di level saat ini
                        showQuestion(); // Tampilkan soal berikutnya
                    }, 1500);

                } else {
                    // Jawaban Salah
                    selectedBtn.classList.remove('selected');
                    selectedBtn.classList.add('wrong');
                    
                    // Tampilkan jawaban yang benar
                    const correctBtn = document.getElementById(`answer${correctAnswer}`);
                    correctBtn.classList.add('correct');

                    // Jeda sebelum game over
                    setTimeout(() => {
                        showGameOverModal(false); // false = kalah
                    }, 2000);
                }
            }, 1000); // Jeda 1 detik setelah memilih
        }

        // Fungsi untuk menampilkan modal Game Over
        function showGameOverModal(isWinner) {
            // --- [PERBAIKAN] HENTIKAN MUSIK ---
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0; // Reset musik ke awal
            }
            // --- [PERBAIKAN] SELESAI MUSIK ---

            const modal = document.getElementById('gameOverModal');
            const title = document.getElementById('gameOverTitle');
            const message = document.getElementById('gameOverMessage');
            
            let finalPrize = 0;

            if (isWinner) {
                // Pemain menang 1 Miliar
                finalPrize = prizeLevels[15];
                title.textContent = "SELAMAT, ANDA MILIARDER!";
                message.textContent = `Anda telah menjawab semua 15 soal dengan benar dan memenangkan hadiah utama: Rp ${formatMoney(finalPrize)}!`;
            } else {
                // Pemain kalah, cek titik aman
                title.textContent = "Game Over";
                
                // Cari titik aman terakhir yang dilewati
                let safePrize = 0;
                for (const safeLevel of safeLevels) {
                    if (currentQuestionIndex >= safeLevel) {
                        safePrize = prizeLevels[safeLevel];
                    }
                }
                finalPrize = safePrize;
                message.textContent = `Jawaban Anda salah. Anda pulang dengan membawa: Rp ${formatMoney(finalPrize)}.`;
            }

            // Simpan skor jika menang atau dapat hadiah
            if (finalPrize > 0 || isWinner) {
                saveScore(finalPrize, isWinner ? 15 : currentQuestionIndex);
            }

            modal.style.display = 'flex';
        }
        
        // Fungsi untuk menyimpan skor
        function saveScore(prize, level) {
            const scores = JSON.parse(localStorage.getItem('millionaireScores')) || [];
            
            const newScore = {
                name: playerName,
                prize: prize,
                level: level,
                date: new Date().toLocaleString('id-ID')
            };
            
            scores.push(newScore);
            
            // Urutkan skor dari yang tertinggi
            scores.sort((a, b) => b.prize - a.prize);

            // Simpan hanya 10 skor teratas
            localStorage.setItem('millionaireScores', JSON.stringify(scores.slice(0, 10)));
        }

        // Fungsi untuk menampilkan papan skor
        function showLeaderboard() {
            const scores = JSON.parse(localStorage.getItem('millionaireScores')) || [];
            const contentDiv = document.getElementById('leaderboardContent');
            
            if (scores.length === 0) {
                contentDiv.innerHTML = '<p>Belum ada skor yang tersimpan.</p>';
            } else {
                const medals = ['ðŸ¥‡', 'ðŸ¥ˆ', 'ðŸ¥‰'];
                contentDiv.innerHTML = `
                    <table id="leaderboardTable">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Nama</th>
                                <th>Hadiah</th>
                                <th>Level</th>
                                <th>Tanggal</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${scores.map((score, index) => `
                                <tr>
                                    <td>
                                        <span class="rank-medal">${medals[index] || (index + 1)}</span>
                                    </td>
                                    <td>${score.name}</td>
                                    <td>Rp ${formatMoney(score.prize)}</td>
                                    <td>${score.level}/15</td>
                                    <td style="font-size: 0.75rem;">${score.date}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }

            document.getElementById('leaderboardModal').style.display = 'flex';
        }

        function closeLeaderboard() {
            document.getElementById('leaderboardModal').style.display = 'none';
        }

        function clearLeaderboard() {
            // Catatan: confirm() mungkin diblokir di beberapa lingkungan. 
            // Untuk GitHub Pages biasa, ini seharusnya berfungsi.
            if (confirm('Anda yakin ingin menghapus semua skor?')) {
                localStorage.removeItem('millionaireScores');
                showLeaderboard(); // Refresh tampilan papan skor
            }
        }

        // Fungsi untuk kembali ke menu awal
        function restartGame() {
            // --- [PERBAIKAN] HENTIKAN MUSIK ---
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0; // Reset musik ke awal
            }
            // --- [PERBAIKAN] SELESAI MUSIK ---

            document.getElementById('gameOverModal').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'none';
            document.getElementById('startSection').style.display = 'block';
            document.getElementById('playerName').value = '';
            
            // Tidak perlu reset file input, biarkan bank soal default yang sudah dimuat
            // Cukup panggil loadDefaultFile() untuk memastikan soal default siap
            loadDefaultFile();
        }
    </script>
</body>
</html>
